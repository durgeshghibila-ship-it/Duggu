<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Audio Client (manual SDP)</title></head>
<body>
  <h2>Android Audio Client</h2>
  <p>Paste server Offer here:</p>
  <textarea id="offer" rows="8" cols="80"></textarea><br>
  <button id="connect">Connect</button>
  <p>Client Answer (copy to server):</p>
  <textarea id="answer" rows="8" cols="80"></textarea><br>
  <audio id="player" controls autoplay></audio>

  <script>
    const offerBox = document.getElementById('offer');
    const answerBox = document.getElementById('answer');
    const connectBtn = document.getElementById('connect');
    const player = document.getElementById('player');

    const pc = new RTCPeerConnection();
    pc.ontrack = e => {
      player.srcObject = e.streams[0];
    };

    pc.onicecandidate = e => {
      if (e.candidate === null) {
        answerBox.value = JSON.stringify(pc.localDescription);
      }
    };

    connectBtn.onclick = async () => {
      try {
        const offer = JSON.parse(offerBox.value);
        await pc.setRemoteDescription(offer);
        const answer = await pc.createAnswer();
        await pc.setLocalDescription(answer);
        answerBox.value = "Gathering ICE... please wait until this area is populated automatically.";
      } catch (err) {
        alert('Error: ' + err);
      }
    };
  </script>
</body>
</html>
