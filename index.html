<!DOCTYPE html>
<html>
<head>
  <title>Audio Server</title>
</head>
<body>
  <h2>ChromeOS Audio Server</h2>
  <button id="start">Start Streaming</button>
  <pre id="offer"></pre>
  <textarea id="answer" placeholder="Paste client answer here"></textarea>
  <button id="setAnswer">Set Answer</button>

  <script>
    let pc = new RTCPeerConnection();
    let startBtn = document.getElementById("start");
    let offerBox = document.getElementById("offer");
    let answerBox = document.getElementById("answer");
    let setAnswerBtn = document.getElementById("setAnswer");

    startBtn.onclick = async () => {
      let stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      stream.getTracks().forEach(track => pc.addTrack(track, stream));

      let offer = await pc.createOffer();
      await pc.setLocalDescription(offer);
      offerBox.textContent = JSON.stringify(offer);
    };

    setAnswerBtn.onclick = async () => {
      let answer = JSON.parse(answerBox.value);
      await pc.setRemoteDescription(answer);
      alert("Client connected!");
    };
  </script>
</body>
</html>
